var url_string=window.location.href;var url=new URL(url_string);var cpt_id=url.searchParams.get("post");var feed_type=url.searchParams.get("feed_type");jQuery(document).ready(ftg_admin_gallery_tabs);function ftg_admin_gallery_tabs(){jQuery("ul.nav-tabs").each(function(){var $active,$content,$links=jQuery(this).find("a");$active=jQuery($links.filter('[href="'+location.hash+'"]')[0]||$links[0]);$active.addClass("active");$content=jQuery($active[0].hash);$links.not($active).each(function(){jQuery(this.hash).hide()});jQuery(this).on("click","a",function(e){$active.removeClass("active");$content.hide();$active=jQuery(this);$content=jQuery(this.hash);$active.addClass("active");$content.show();e.preventDefault()})})}function fts_ajax_cpt_save_token(){var newUrl=ftg_mb_tabs.submit_msgs.fts_post;window.location.replace(newUrl);jQuery(".post-type-fts .wrap form#post").ajaxSubmit({beforeSend:function(){jQuery("#ftg-saveResult").html("<div class='ftg-overlay-background'><div class='ftg-relative-wrap-overlay'><div id='ftg-saveMessage' class='ftg-successModal ftg-saving-form'></div></div></div>");jQuery("#ftg-saveMessage").append(ftg_mb_tabs.submit_msgs.saving_msg).show();jQuery("#publishing-action .spinner").css("visibility","visible")},success:function(response){console.log("Token Saved Successfully");jQuery("#ftg-saveResult").html("<div class='ftg-overlay-background'><div class='ftg-relative-wrap-overlay'><div id='ftg-saveMessage' class='ftg-successModal ftg-success-form'></div></div></div>");jQuery("#ftg-saveMessage").append(ftg_mb_tabs.submit_msgs.success_msg).show();jQuery("#publishing-action .spinner").css("visibility","hidden");setTimeout("jQuery('.ftg-overlay-background').hide();",400);jQuery(".updatefrombottom a.button-primary").html("Update")}});return false}function fts_ajax_cpt_save(shortcodeConverted,should_we_empty_cache){jQuery(".post-type-fts .wrap form#post").ajaxSubmit({beforeSend:function(){if("no-save-message"!==shortcodeConverted){jQuery("#ftg-saveResult").html("<div class='ftg-overlay-background'><div class='ftg-relative-wrap-overlay'><div id='ftg-saveMessage'    class='ftg-successModal ftg-saving-form'></div></div></div>");jQuery("#ftg-saveMessage").append(ftg_mb_tabs.submit_msgs.saving_msg).show();jQuery("#publishing-action .spinner").css("visibility","visible")}else if(jQuery(".fts-cache-pre-loading").length>0&&!jQuery(".fts-empty-access-token").length>0){jQuery(".fts-loading-feed-admin").hide();jQuery(".fts-shortcode-content").append('<div class="fts-loading-feed-admin fts-cache-loading">'+ftg_mb_tabs.submit_msgs.fts_loading_message+"</div>")}},success:function(response){console.log("Saved Successfully");if("no-save-message"!==shortcodeConverted){jQuery("#ftg-saveResult").html("<div class='ftg-overlay-background'><div class='ftg-relative-wrap-overlay'><div id='ftg-saveMessage'    class='ftg-successModal ftg-success-form'></div></div></div>");jQuery("#ftg-saveMessage").append(ftg_mb_tabs.submit_msgs.success_msg).show();jQuery("#publishing-action .spinner").css("visibility","hidden");setTimeout("jQuery('.ftg-overlay-background').hide();",400)}jQuery(".updatefrombottom a.button-primary").html("Update");var hash2=window.location.hash.replace("#","");if(hash2==="fts-convert-old-shortcode"||hash2==="fts-feed-type"||hash2==="feed_setup"||hash2===""){jQuery(window).off("beforeunload");location.reload()}else{refresh_feed_ajax(should_we_empty_cache)}}});return false}function refresh_feed_ajax(should_we_empty_cache){if("empty-cache"===should_we_empty_cache){fts_ClearCache()}jQuery.ajax({data:{action:"fts_refresh_feed_ajax",cpt_id:cpt_id,_wpnonce:ftg_mb_tabs.ajaxRefreshFeedNonce},type:"POST",url:ftsAjax.ajaxurl,success:function(response){jQuery(".fts-loading-feed-admin").fadeOut();if(response.indexOf("Feed Them Social:")>-1){jQuery(".fts-shortcode-content").html(response);jQuery(".fts-loading-feed-admin").remove()}else{jQuery(".fts-shortcode-content").removeClass("fts-shortcode-content-no-feed");setTimeout(function(){jQuery(".fts-shortcode-content").html(response);jQuery(".fts-loading-feed-admin").remove();fts_show_hide_shortcode_feed();if(jQuery.fn.masonry){if("yes"===jQuery("#facebook_grid").val()){jQuery(".fts-slicker-facebook-posts").masonry({itemSelector:".fts-jal-single-fb-post"});jQuery(".masonry").masonry("reloadItems");jQuery(".masonry").masonry("layout")}if("yes"===jQuery("#tiktok-grid-option").val()){jQuery(".fts-slicker-twitter-posts").masonry({itemSelector:".fts-tweeter-wrap"});jQuery(".masonry").masonry("reloadItems");jQuery(".masonry").masonry("layout")}if("yes"===jQuery("#combine_grid_option").val()){jQuery(".fts-mashup").masonry({itemSelector:".fts-mashup-post-wrap"});jQuery(".masonry").masonry("reloadItems");jQuery(".masonry").masonry("layout")}}if(jQuery.isFunction(jQuery.fn.ftsCycle2)){jQuery(".fts-fb-slideshow").cycle()}},500)}console.log("Feed Refreshed: "+response)},error:function(response){console.log("Something is not working w/feed refresh: "+response)}});return false}function fts_show_hide_shortcode_feed(feed){if(jQuery(".account-tab-highlight.active").length){jQuery(".fts-shortcode-view").hide();jQuery(".tab-options-content").css({width:"100%"})}else{jQuery(".fts-shortcode-view").show();jQuery(".tab-options-content").css({width:"35%"})}ftsShare();slickremixImageResizing();slickremixImageResizingFacebook();slickremixImageResizingFacebook2();slickremixImageResizingFacebook3();slickremixImageResizingYouTube();if(jQuery.isFunction(jQuery.fn.slickInstagramPopUpFunction)){jQuery.fn.slickInstagramPopUpFunction()}if(jQuery.isFunction(jQuery.fn.slickFacebookPopUpFunction)){jQuery.fn.slickFacebookPopUpFunction()}if(jQuery.isFunction(jQuery.fn.slickTickTokPopUpFunction)){jQuery.fn.slickTickTokPopUpFunction()}if(jQuery.isFunction(jQuery.fn.slickYoutubePopUpFunction)){jQuery.fn.slickYoutubePopUpFunction()}}function checkAnyFormFieldEdited(){jQuery("#instagram_feed input, #facebook_feed input, #twitter_feed input, #youtube_feed input, #combine_streams_feed input").keypress(function(e){});jQuery("#instagram_feed input, #facebook_feed input, #twitter_feed input, #youtube_feed input, #combine_streams_feed input").keyup(function(e){if(e.keyCode==8||e.keyCode==46){}else{e.preventDefault()}});jQuery("select").keyup(function(e){});jQuery("#instagram_feed, #facebook_feed, #twitter_feed, #youtube_feed, #combine_streams_feed").on("input, select, :checkbox",function(){});jQuery("#instagram_feed input, #facebook_feed input, #twitter_feed input, #youtube_feed input, #combine_streams_feed input").bind("paste",function(e){});jQuery("#instagram_feed select, #instagram_feed input, "+"#facebook_feed select, #facebook_feed input, "+"#tiktok_feed select, #tiktok_feed input, "+"#youtube_feed select, #youtube_feed input, "+"#combine_streams_feed input").change(function(e){let should_we_empty_cache="";if(jQuery(e.target).is("#tweets_count")||jQuery(e.target).is("#instagram_pics_count")||jQuery(e.target).is("#instagram_feed_type")||jQuery(e.target).is("#instagram_profile_wrap")||jQuery(e.target).is("#facebook_page_feed_type")||jQuery(e.target).is("#facebook_page_post_count")||jQuery(e.target).is("#facebook_hide_like_box_button")||jQuery(e.target).is("#youtube-messages-selector")||jQuery(e.target).is("#youtube_channelID")||jQuery(e.target).is("#youtube_channelID2")||jQuery(e.target).is("#youtube_vid_count")||jQuery(e.target).is("#youtube_playlistID")||jQuery(e.target).is("#youtube_playlistID2")||jQuery(e.target).is("#youtube_singleVideoID")||jQuery(e.target).is("#youtube_name")||jQuery(e.target).is("#youtube_name2")||jQuery(e.target).is("#combine_post_count")||jQuery(e.target).is("#combine_social_network_post_count")){should_we_empty_cache="empty-cache"}else{should_we_empty_cache="do-not-empty-cache"}fts_ajax_cpt_save("no-save-message",should_we_empty_cache)})}jQuery(document).ready(function($){$(".fts-responsive-options").each(function(){$(this).append('<div class="fts-clear"></div>\n'+'                    <div class="fts-responsive-options-wrap fts-responsive-click">\n'+'                        <span class="fts-responsive-desktop fts-responsive-tab-active" data-target=".responsive-columns-desktop-wrap"></span><span class="fts-responsive-tablet" data-target=".responsive-columns-tablet-wrap"></span><span class="fts-responsive-mobile" data-target=".responsive-columns-mobile-wrap"></span>\n'+"                    </div>")});$(".fts-responsive-options-wrap span").click(function(){var parentWrap=$(this).closest(".fts-responsive-wrap");var target=$(this).data("target");parentWrap.find(".fts-responsive-options-wrap span").removeClass("fts-responsive-tab-active");$(this).addClass("fts-responsive-tab-active");parentWrap.find(".responsive-columns-desktop-wrap, .responsive-columns-tablet-wrap, .responsive-columns-mobile-wrap, .responsive-columns-desktop-wrap-2, .responsive-columns-tablet-wrap-2, .responsive-columns-mobile-wrap-2").hide();parentWrap.find(target).show()});fts_show_hide_shortcode_feed();checkAnyFormFieldEdited();jQuery(".fts-shortcode-content").addClass("fts-cache-pre-loading");$(".fts-info-icon").click(function(){$(".fts-select-social-network-menu-instructions").slideToggle()});jQuery(".ft-gallery-notice").on("click",".ft-gallery-notice-close",function(){jQuery(".ft-gallery-notice").html("");jQuery(".ft-gallery-notice").removeClass("updated, ftg-block")});jQuery(".tab-content-wrap").on("click",".fts-facebook-successful-api-token",function(e){jQuery(".tab5 a").click();var clickedLink=$(".tab5 a").attr("href");location.hash=clickedLink;fts_show_hide_shortcode_feed("facebook");e.preventDefault()});jQuery(".tab-content-wrap").on("click",".fts-instagram-successful-api-token, .fts-instagram-business-successful-api-token",function(e){jQuery(".tab4 a").click();var clickedLink=$(".tab4 a").attr("href");location.hash=clickedLink;fts_show_hide_shortcode_feed("instagram");e.preventDefault()});jQuery(".tab-content-wrap").on("click",".fts-twitter-successful-api-token",function(e){jQuery(".tab6 a").click();var clickedLink=$(".tab6 a").attr("href");location.hash=clickedLink;fts_show_hide_shortcode_feed("twitter");e.preventDefault()});jQuery(".tab-content-wrap").on("click",".fts-youtube-successful-api-token",function(e){jQuery(".tab7 a").click();var clickedLink=$(".tab7 a").attr("href");location.hash=clickedLink;fts_show_hide_shortcode_feed("youtube");e.preventDefault()});jQuery(".tab-content-wrap").on("click",".fts-combine-successful-api-token",function(e){jQuery(".tab8 a").click();var clickedLink=$(".tab8 a").attr("href");location.hash=clickedLink;fts_show_hide_shortcode_feed("combined");e.preventDefault()});var hash=window.location.hash.replace("#","");if(hash){document.getElementById(hash).style.display="block"}jQuery(".post-type-fts .wrap form#post").submit(function(e){e.preventDefault();fts_ajax_cpt_save()});if(location.hash==="#instagram_feed"||location.hash==="#facebook_feed"||location.hash==="#tiktok_feed"||location.hash==="#youtube_feed"||location.hash==="#combine_streams_feed"){jQuery(".tab-options-content").css({width:"35%",float:"left",display:"inline-block"})}$(".ft-gallery-settings-tabs-meta-wrap ul.nav-tabs a").click(function(event){var clickedLink=$(this).attr("href");if("#feed_setup"===clickedLink){jQuery(".fts-shortcode-view").hide();jQuery(".tab-options-content").css({width:"100%"})}else{jQuery(".fts-shortcode-view").show();jQuery(".tab-options-content").css({width:"35%",float:"left",display:"inline-block"});fts_ajax_cpt_save("no-save-message")}ftsShare();slickremixImageResizing();slickremixImageResizingFacebook();slickremixImageResizingFacebook2();slickremixImageResizingFacebook3();slickremixImageResizingYouTube();if(jQuery.isFunction(jQuery.fn.slickInstagramPopUpFunction)){jQuery.fn.slickInstagramPopUpFunction()}if(jQuery.isFunction(jQuery.fn.slickFacebookPopUpFunction)){jQuery.fn.slickFacebookPopUpFunction()}if(jQuery.isFunction(jQuery.fn.slickTickTokPopUpFunction)){jQuery.fn.slickTickTokPopUpFunction()}if(jQuery.isFunction(jQuery.fn.slickYoutubePopUpFunction)){jQuery.fn.slickYoutubePopUpFunction()}location.hash=clickedLink});jQuery(".ft-gallery-settings-tabs-meta-wrap #tabs").on("click","label.tabbed",function(){var myURL=document.location;document.location=myURL+"&tab="+jQuery(this).attr("id")});jQuery("#facebook-custom-gallery").bind("change",function(e){if(jQuery("#facebook-custom-gallery").val()=="yes"){jQuery(".fts-super-facebook-options-wrap").show()}else{jQuery(".fts-super-facebook-options-wrap").hide()}});if(jQuery("#fts_popup").val()=="no"){jQuery(".ft-images-sizes-popup").hide()}jQuery("#fts_popup").bind("change",function(e){if(jQuery("#fts_popup").val()=="yes"){jQuery(".ft-images-sizes-popup").show()}else{jQuery(".ft-images-sizes-popup").hide()}});jQuery("#fts_load_more_option").bind("change",function(e){if(jQuery("#fts_load_more_option").val()=="yes"){if(jQuery("#facebook_page_feed_type").val()!=="album_videos"){jQuery(".fts-facebook-load-more-options-wrap").show()}jQuery(".fts-facebook-load-more-options2-wrap").show();jQuery("#fts_show_true_pagination").attr("disabled","disabled");jQuery(".ftg-pagination-notice-colored").show()}else{jQuery(".fts-facebook-load-more-options-wrap, .fts-facebook-load-more-options2-wrap").hide();jQuery("#fts_show_true_pagination").removeAttr("disabled");jQuery(".ftg-pagination-notice-colored").hide()}});if(jQuery("#fts_load_more_option").val()=="yes"){jQuery(".fts-facebook-load-more-options-wrap, .fts-facebook-load-more-options2-wrap").show();jQuery(".fts-facebook-grid-options-wrap").show();jQuery("#fts_show_true_pagination").attr("disabled","disabled");jQuery(".ftg-pagination-notice-colored").show()}if(jQuery("#fts_grid_option").val()=="yes"){jQuery(".fts-facebook-grid-options-wrap").show();jQuery(".feed-them-social-admin-input-label:contains('Center Facebook Container?')").parent("div").show()}});function fts_encrypt_token_ajax(access_token,token_type,id,firstRequest){console.log("access_token: "+JSON.stringify(access_token));console.log("token_type: "+token_type);console.log("id: "+id);jQuery.ajax({data:{action:"fts_encrypt_token_ajax",cpt_id:cpt_id,access_token:JSON.stringify(access_token),token_type:token_type,_wpnonce:ftg_mb_tabs.ajaxEncryptNonce},type:"POST",url:ftsAjax.ajaxurl,success:function(response){console.log(response);var data=JSON.parse(response);console.log(data);if("firstRequest"===firstRequest){jQuery(id).val("");jQuery(id).val(jQuery(id).val()+data.encrypted);jQuery(id).attr("data-token","encrypted").attr("value",data.encrypted);console.log("first request "+id);if("instagram_business"===data.feed_type||"facebook_business"===data.feed_type){location.reload()}if("instagram_basic"===data.feed_type||"tiktok"===data.feed_type||"youtube"===data.feed_type){var newUrl=ftg_mb_tabs.submit_msgs.fts_post;window.location.replace(newUrl)}}console.log(id+": OG Token and Encrypted Response........: "+response)},error:function(response){console.log("Error with encryption process: "+response)}});return false}function fts_show_decrypt_token_text(){if(""!==jQuery(".fts-instagram-access-token  .fts-decrypted-token").parent().parent().find("input").attr("value")){jQuery(".fts-instagram-access-token .fts-decrypted-token").show()}if(""!==jQuery(".fts-facebook-instagram-access-token  .fts-decrypted-token").parent().parent().find("input").attr("value")){jQuery(".fts-facebook-instagram-access-token .fts-decrypted-token").show()}if(""!==jQuery(".fts-facebook-access-token  .fts-decrypted-token").parent().parent().find("input").attr("value")){jQuery(".fts-facebook-access-token .fts-decrypted-token").show()}jQuery(".fts-decrypted-token").click(function(){if(jQuery(this).hasClass("fts-remove-decrypted-token")){jQuery(this).parent().parent().find(".fts-decrypted-view").remove();jQuery(".fts-show-token",this).show();jQuery(".fts-hide-token",this).hide();jQuery(this).addClass("fts-copy-decrypted-token").removeClass("fts-remove-decrypted-token")}else{var encrypted_token=jQuery(this).parent().parent().find("input").attr("value");var id=jQuery(this).parent().parent().find("input").attr("id");fts_decrypt_token_ajax(encrypted_token,id)}})}function fts_decrypt_token_ajax(encrypted_token,id){console.log("access_token: "+encrypted_token);console.log("id: "+id);jQuery.ajax({data:{action:"fts_decrypt_token_ajax",encrypted_token:encrypted_token,_wpnonce:ftg_mb_tabs.ajaxDecryptNonce},type:"POST",url:ftsAjax.ajaxurl,success:function(response){jQuery("#"+id).parent().find(".fts-decrypted-view").remove();jQuery("#"+id).parent().find(".fts-show-token").hide();jQuery("#"+id).parent().find(".fts-hide-token").show();jQuery("#"+id).parent().find(".fts-decrypted-token").removeClass("fts-copy-decrypted-token").addClass("fts-remove-decrypted-token");jQuery("#"+id).parent().append('<div class="fts-decrypted-view">'+response+"</div>");console.log(id+": OG Token and Decrypted Response........: "+response)},error:function(response){console.log("Something is not working with decryption: "+response)}});return false}